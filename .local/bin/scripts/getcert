#!/bin/bash

# Check if a URL was provided as an argument
[ $# -eq 0 ] && { echo "Usage: $0 <url>"; exit 1; }

# Check if openssl command is available
if ! command -v openssl >/dev/null; then
  echo "openssl command not found. Please install openssl."
  exit 1
fi

# Extract the domain from the provided URL
url="$1"
domain=$(echo "$url" | sed -e 's/https:\/\/\([^/]*\)\/.*/\1/')

# Check if the webpage exists
if ! curl -sfI "$url" >/dev/null; then
  echo "Webpage does not exist or cannot be accessed."
  exit 1
fi

# Retrieve the SSL certificate
cert_info=$(openssl s_client -connect "$domain":443 </dev/null 2>/dev/null | openssl x509 -inform pem -text)

# Output the certificate information
echo "$cert_info"
