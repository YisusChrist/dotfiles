#!/usr/bin/env python3

"""
@file     xsolver
@date     24/03/2023
@author   Julio Cabria
@deps     numexpr(pip), xclip(system), notify-send(system)
"""

import subprocess
import numexpr as ne


def main() -> int:

    clipboard = subprocess.check_output("xclip -o", shell=True).decode("utf-8")

    try:
        result = str(ne.evaluate(clipboard)).strip()
        cmd = f'echo "{result}" | xclip -selection clipboard'
        subprocess.run(cmd, shell=True)
        exit(0)

    except Exception as e:
        subprocess.run(f'notify-send "Xsolver: {e}"', shell=True)
        exit(1)


if __name__ == "__main__":
    main()
